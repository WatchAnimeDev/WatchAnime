<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Generic Stuff-->
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--Social Sharing Stuff-->
        <meta property="og:title" content="Watch Anime Ad Free" />
        <meta property="og:image" content="%PUBLIC_URL%/favicon/android-chrome-512x512.png" />
        <meta property="og:description" content="Watch anime ad free with friends!" />
        <!--Favicons-->
        <meta name="msapplication-TileColor" content="#603cba" />
        <meta name="theme-color" content="#ffffff" />
        <link rel="apple-touch-icon" sizes="180x180" href="%PUBLIC_URL%/favicon/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="%PUBLIC_URL%/favicon/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="%PUBLIC_URL%/favicon/favicon-16x16.png" />
        <link rel="mask-icon" href="%PUBLIC_URL%/favicon/safari-pinned-tab.svg" color="#5bbad5" />
        <link rel="shortcut icon" href="%PUBLIC_URL%/favicon/favicon.ico" />

        <!--Preconnect-->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preconnect" href="https://api.watchanime.dev" />
        <!--Manifest for PWA-->
        <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

        <!--Google font-->
        <link href="https://fonts.googleapis.com/css2?family=Schibsted+Grotesk:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />

        <title>Watch Anime</title>
    </head>
    <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="root"></div>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-9MMBH4GFGZ"></script>
        <script>
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", function () {
                    navigator.serviceWorker.register("/serviceWorker.js").then(
                        function (registration) {
                            // Registration was successful
                            console.log("ServiceWorker registration successful with scope: ", registration.scope);
                        },
                        function (err) {
                            // registration failed :(
                            console.log("ServiceWorker registration failed: ", err);
                        }
                    );
                });
            }
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-9MMBH4GFGZ");
            (function () {
                var cors_api_url = "https://streamsbs.watchanime.dev/";
                var slice = [].slice;
                var origin = window.location.protocol + "//" + window.location.host;
                var open = XMLHttpRequest.prototype.open;
                XMLHttpRequest.prototype.open = function () {
                    var args = slice.call(arguments);
                    var targetOrigin = /^https?:\/\/([^\/]+)/i.exec(args[1]);
                    if (args && args.length > 1 && args[1].includes("akamai-video-content") && targetOrigin && targetOrigin[0].toLowerCase() !== origin && targetOrigin[1] !== "streamsbs.watchanime.dev") {
                        args[1] = cors_api_url + args[1];
                    }
                    return open.apply(this, args);
                };
            })();
        </script>
    </body>
</html>
